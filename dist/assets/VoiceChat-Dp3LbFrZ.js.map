{"version":3,"file":"VoiceChat-Dp3LbFrZ.js","sources":["../../src/components/VoiceChat.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useConversation } from '@elevenlabs/react';\r\nimport { X, Mic, Phone } from 'lucide-react';\r\nimport { CONSTANTS } from '../constants';\r\n\r\ninterface VoiceChatProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nexport function VoiceChat({ isOpen, onClose }: VoiceChatProps) {\r\n  const { status, isSpeaking, startSession, endSession } = useConversation({\r\n    agentId: CONSTANTS.ELEVENLABS_AGENT_ID,\r\n  });\r\n\r\n  const [displayStatus, setDisplayStatus] = useState<'idle' | 'connecting' | 'connected' | 'speaking' | 'listening' | 'error'>(\r\n    'idle'\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!isOpen) {\r\n      if (status === 'connected') {\r\n        endSession();\r\n      }\r\n      setDisplayStatus('idle');\r\n    } else {\r\n      // Auto-start conversation when modal opens\r\n      if (status === 'disconnected') {\r\n        startSession({\r\n          agentId: CONSTANTS.ELEVENLABS_AGENT_ID,\r\n          connectionType: 'websocket',\r\n        });\r\n      }\r\n    }\r\n  }, [isOpen, status, startSession, endSession]);\r\n\r\n  // Update display status based on actual status and speaking state\r\n  useEffect(() => {\r\n    if (status === 'connecting') {\r\n      setDisplayStatus('connecting');\r\n    } else if (status === 'connected') {\r\n      if (isSpeaking) {\r\n        setDisplayStatus('speaking');\r\n      } else {\r\n        setDisplayStatus('listening');\r\n      }\r\n    } else {\r\n      setDisplayStatus('idle');\r\n    }\r\n  }, [status, isSpeaking]);\r\n\r\n  const handleEndCall = () => {\r\n    endSession();\r\n    onClose();\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-off-white border-3 border-charcoal shadow-brutal-chat rounded-sm w-full max-w-sm max-h-[600px] flex flex-col overflow-hidden\">\r\n        {/* Header */}\r\n        <div className=\"bg-warm-beige border-b-3 border-charcoal p-4 flex items-center justify-between\">\r\n          <div>\r\n            <h3 className=\"font-black text-xl uppercase\">Voice Demo</h3>\r\n            <p className=\"text-xs text-charcoal\">\r\n              {displayStatus === 'idle' && 'Ready to start'}\r\n              {displayStatus === 'connecting' && 'Connecting...'}\r\n              {displayStatus === 'connected' && 'Connected'}\r\n              {displayStatus === 'speaking' && 'Agent Speaking'}\r\n              {displayStatus === 'listening' && 'Listening...'}\r\n              {displayStatus === 'error' && 'Connection Error'}\r\n            </p>\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"w-8 h-8 flex items-center justify-center hover:bg-charcoal hover:text-off-white transition-colors rounded-sm border-2 border-charcoal\"\r\n            aria-label=\"Close\"\r\n          >\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Main Content */}\r\n        <div className=\"flex-1 flex flex-col items-center justify-center p-6 space-y-6\">\r\n          {/* Status Indicator */}\r\n          <div className=\"flex flex-col items-center space-y-4\">\r\n            {/* Animated Microphone Indicator */}\r\n            <div className=\"relative w-24 h-24 flex items-center justify-center\">\r\n              {/* Background circles for animation */}\r\n              {displayStatus === 'speaking' && (\r\n                <>\r\n                  <div className=\"absolute inset-0 border-3 border-terracotta rounded-full animate-pulse\" />\r\n                  <div\r\n                    className=\"absolute inset-2 border-3 border-terracotta rounded-full animate-pulse\"\r\n                    style={{ animationDelay: '0.2s' }}\r\n                  />\r\n                </>\r\n              )}\r\n              {displayStatus === 'listening' && (\r\n                <>\r\n                  <div className=\"absolute inset-0 border-3 border-soft-sage rounded-full animate-pulse\" />\r\n                  <div\r\n                    className=\"absolute inset-2 border-3 border-soft-sage rounded-full animate-pulse\"\r\n                    style={{ animationDelay: '0.2s' }}\r\n                  />\r\n                </>\r\n              )}\r\n\r\n              {/* Center Circle */}\r\n              <div\r\n                className={`relative z-10 w-16 h-16 rounded-full border-3 border-charcoal flex items-center justify-center ${\r\n                  displayStatus === 'speaking'\r\n                    ? 'bg-terracotta'\r\n                    : displayStatus === 'listening'\r\n                    ? 'bg-soft-sage'\r\n                    : displayStatus === 'connecting'\r\n                    ? 'bg-muted-taupe'\r\n                    : displayStatus === 'error'\r\n                    ? 'bg-peach'\r\n                    : 'bg-warm-beige'\r\n                }`}\r\n              >\r\n                {displayStatus === 'error' ? (\r\n                  <span className=\"text-2xl font-black\">!</span>\r\n                ) : (\r\n                  <Mic className=\"w-8 h-8 text-charcoal\" />\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Status Text */}\r\n            <div className=\"text-center\">\r\n              <p className=\"font-black text-charcoal uppercase text-sm\">\r\n                {displayStatus === 'idle' && 'Ready'}\r\n                {displayStatus === 'connecting' && 'Connecting...'}\r\n                {displayStatus === 'connected' && 'Connected - Speak Now'}\r\n                {displayStatus === 'speaking' && 'Agent Speaking'}\r\n                {displayStatus === 'listening' && 'Listening to You'}\r\n                {displayStatus === 'error' && 'Connection Error'}\r\n              </p>\r\n              <p className=\"text-xs text-charcoal mt-1\">\r\n                {displayStatus === 'listening' && 'Your microphone is active'}\r\n                {displayStatus === 'speaking' && 'The agent is speaking'}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Controls */}\r\n        <div className=\"border-t-3 border-charcoal bg-off-white p-4 flex gap-3\">\r\n          {/* End Call Button */}\r\n          <button\r\n            onClick={handleEndCall}\r\n            className=\"w-full bg-peach text-charcoal px-4 py-3 border-3 border-charcoal shadow-brutal-xs font-black uppercase text-sm hover:-translate-x-[1px] hover:-translate-y-[1px] hover:shadow-brutal-sm transition-all duration-200 flex items-center justify-center gap-2 rounded-sm\"\r\n          >\r\n            <Phone className=\"w-4 h-4\" />\r\n            <span>End Call</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["VoiceChat","isOpen","onClose","status","isSpeaking","startSession","endSession","useConversation","agentId","CONSTANTS","ELEVENLABS_AGENT_ID","displayStatus","setDisplayStatus","useState","useEffect","connectionType","className","children","jsxs","jsx","jsxRuntimeExports","onClick","X","Fragment","style","animationDelay","Mic","Phone"],"mappings":"+MAUO,SAASA,GAAUC,OAAEA,EAAQC,QAAAA,IAClC,MAAMC,OAAEA,EAAQC,WAAAA,EAAAC,aAAYA,EAAcC,WAAAA,GAAeC,EAAgB,CACvEC,QAASC,EAAUC,uBAGdC,EAAeC,GAAoBC,EAAAA,SACxC,QAGFC,EAAAA,UAAU,KACHb,EAOY,iBAAXE,GACWE,EAAA,CACXG,QAASC,EAAUC,oBACnBK,eAAgB,eATL,cAAXZ,OAGJS,EAAiB,UAUlB,CAACX,EAAQE,EAAQE,EAAcC,IAGlCQ,EAAAA,UAAU,KAENF,EADa,eAAXT,EACe,aACG,cAAXA,EACLC,EACe,WAEA,YAGF,SAElB,CAACD,EAAQC,IAOR,OAACH,QAGF,MAAI,CAAAe,UAAU,sEACbC,SAACC,EAAAA,KAAA,MAAA,CAAIF,UAAU,kIAEbC,SAAA,GAACC,KAAA,MAAA,CAAIF,UAAU,iFACbC,SAAA,QAAC,MACC,CAAAA,SAAA,CAACE,EAAAA,IAAA,KAAA,CAAGH,UAAU,+BAA+BC,SAAU,iBACvDC,KAAC,IAAE,CAAAF,UAAU,wBACVC,SAAA,CAAkB,SAAlBN,GAA4B,iBACV,eAAlBA,GAAkC,gBAChB,cAAlBA,GAAiC,YACf,aAAlBA,GAAgC,iBACd,cAAlBA,GAAiC,eACf,UAAlBA,GAA6B,yBAGlCS,EAAAD,IAAC,SAAA,CACCE,QAASnB,EACTc,UAAU,wIACV,aAAW,QAEXC,SAAAE,EAAAA,IAACG,EAAE,CAAAN,UAAU,uBAKhB,MAAI,CAAAA,UAAU,iEAEbC,SAACC,EAAAA,KAAA,MAAA,CAAIF,UAAU,uCAEbC,SAAA,GAACC,KAAA,MAAA,CAAIF,UAAU,sDAEZC,SAAA,CAAkB,aAAlBN,GAEGO,EAAAA,KAAAK,EAAAA,SAAA,CAAAN,SAAA,GAACE,IAAA,MAAA,CAAIH,UAAU,2EACfI,EAAAD,IAAC,MAAA,CACCH,UAAU,yEACVQ,MAAO,CAAEC,eAAgB,aAIZ,cAAlBd,GAEGO,EAAAA,KAAAK,EAAAA,SAAA,CAAAN,SAAA,GAACE,IAAA,MAAA,CAAIH,UAAU,0EACfI,EAAAD,IAAC,MAAA,CACCH,UAAU,wEACVQ,MAAO,CAAEC,eAAgB,aAM/BL,EAAAD,IAAC,MAAA,CACCH,UAAW,mGACS,aAAlBL,EACI,gBACkB,cAAlBA,EACA,eACkB,eAAlBA,EACA,iBACkB,UAAlBA,EACA,WACA,iBAGLM,SAAkB,UAAlBN,IACCQ,IAAC,OAAK,CAAAH,UAAU,sBAAsBC,SAAA,MAEtCG,EAAAD,IAACO,EAAI,CAAAV,UAAU,iCAMrBE,KAAC,MAAI,CAAAF,UAAU,cACbC,SAAA,GAACC,KAAA,IAAA,CAAEF,UAAU,6CACVC,SAAA,CAAkB,SAAlBN,GAA4B,QACV,eAAlBA,GAAkC,gBAChB,cAAlBA,GAAiC,wBACf,aAAlBA,GAAgC,iBACd,cAAlBA,GAAiC,mBACf,UAAlBA,GAA6B,wBAEhCO,KAAC,IAAE,CAAAF,UAAU,6BACVC,SAAA,CAAkB,cAAlBN,GAAiC,4BACf,aAAlBA,GAAgC,qCAOzCQ,IAAC,MAAI,CAAAH,UAAU,yDAEbC,SAAAG,EAAAF,KAAC,SAAA,CACCG,QAtGY,cAuGZL,UAAU,wQAEVC,SAAA,GAACE,IAAAQ,EAAA,CAAMX,UAAU,cACjBG,IAAC,QAAKF,SAAQ,uBArGJ,IA2GtB"}