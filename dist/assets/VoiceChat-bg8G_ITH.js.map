{"version":3,"file":"VoiceChat-bg8G_ITH.js","sources":["../../src/components/VoiceChat.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useConversation } from '@elevenlabs/react';\nimport { X, Mic, Phone } from 'lucide-react';\n\ninterface VoiceChatProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport function VoiceChat({ isOpen, onClose }: VoiceChatProps) {\n  const { status, isSpeaking, startSession, endSession } = useConversation({\n    agentId: 'agent_0701k72hgm7se1gvm1db45vg23r1',\n  });\n\n  const [displayStatus, setDisplayStatus] = useState<'idle' | 'connecting' | 'connected' | 'speaking' | 'listening' | 'error'>(\n    'idle'\n  );\n\n  useEffect(() => {\n    if (!isOpen) {\n      if (status === 'connected') {\n        endSession();\n      }\n      setDisplayStatus('idle');\n    } else {\n      // Auto-start conversation when modal opens\n      if (status === 'disconnected') {\n        startSession({\n          agentId: 'agent_0701k72hgm7se1gvm1db45vg23r1',\n          connectionType: 'websocket',\n        });\n      }\n    }\n  }, [isOpen, status, startSession, endSession]);\n\n  // Update display status based on actual status and speaking state\n  useEffect(() => {\n    if (status === 'connecting') {\n      setDisplayStatus('connecting');\n    } else if (status === 'connected') {\n      if (isSpeaking) {\n        setDisplayStatus('speaking');\n      } else {\n        setDisplayStatus('listening');\n      }\n    } else {\n      setDisplayStatus('idle');\n    }\n  }, [status, isSpeaking]);\n\n  const handleEndCall = () => {\n    endSession();\n    onClose();\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-off-white border-3 border-charcoal shadow-brutal-chat rounded-sm w-full max-w-sm max-h-[600px] flex flex-col overflow-hidden\">\n        {/* Header */}\n        <div className=\"bg-warm-beige border-b-3 border-charcoal p-4 flex items-center justify-between\">\n          <div>\n            <h3 className=\"font-black text-xl uppercase\">Voice Demo</h3>\n            <p className=\"text-xs text-charcoal\">\n              {displayStatus === 'idle' && 'Ready to start'}\n              {displayStatus === 'connecting' && 'Connecting...'}\n              {displayStatus === 'connected' && 'Connected'}\n              {displayStatus === 'speaking' && 'Agent Speaking'}\n              {displayStatus === 'listening' && 'Listening...'}\n              {displayStatus === 'error' && 'Connection Error'}\n            </p>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"w-8 h-8 flex items-center justify-center hover:bg-charcoal hover:text-off-white transition-colors rounded-sm border-2 border-charcoal\"\n            aria-label=\"Close\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        {/* Main Content */}\n        <div className=\"flex-1 flex flex-col items-center justify-center p-6 space-y-6\">\n          {/* Status Indicator */}\n          <div className=\"flex flex-col items-center space-y-4\">\n            {/* Animated Microphone Indicator */}\n            <div className=\"relative w-24 h-24 flex items-center justify-center\">\n              {/* Background circles for animation */}\n              {displayStatus === 'speaking' && (\n                <>\n                  <div className=\"absolute inset-0 border-3 border-terracotta rounded-full animate-pulse\" />\n                  <div\n                    className=\"absolute inset-2 border-3 border-terracotta rounded-full animate-pulse\"\n                    style={{ animationDelay: '0.2s' }}\n                  />\n                </>\n              )}\n              {displayStatus === 'listening' && (\n                <>\n                  <div className=\"absolute inset-0 border-3 border-soft-sage rounded-full animate-pulse\" />\n                  <div\n                    className=\"absolute inset-2 border-3 border-soft-sage rounded-full animate-pulse\"\n                    style={{ animationDelay: '0.2s' }}\n                  />\n                </>\n              )}\n\n              {/* Center Circle */}\n              <div\n                className={`relative z-10 w-16 h-16 rounded-full border-3 border-charcoal flex items-center justify-center ${\n                  displayStatus === 'speaking'\n                    ? 'bg-terracotta'\n                    : displayStatus === 'listening'\n                    ? 'bg-soft-sage'\n                    : displayStatus === 'connecting'\n                    ? 'bg-muted-taupe'\n                    : displayStatus === 'error'\n                    ? 'bg-peach'\n                    : 'bg-warm-beige'\n                }`}\n              >\n                {displayStatus === 'error' ? (\n                  <span className=\"text-2xl font-black\">!</span>\n                ) : (\n                  <Mic className=\"w-8 h-8 text-charcoal\" />\n                )}\n              </div>\n            </div>\n\n            {/* Status Text */}\n            <div className=\"text-center\">\n              <p className=\"font-black text-charcoal uppercase text-sm\">\n                {displayStatus === 'idle' && 'Ready'}\n                {displayStatus === 'connecting' && 'Connecting...'}\n                {displayStatus === 'connected' && 'Connected - Speak Now'}\n                {displayStatus === 'speaking' && 'Agent Speaking'}\n                {displayStatus === 'listening' && 'Listening to You'}\n                {displayStatus === 'error' && 'Connection Error'}\n              </p>\n              <p className=\"text-xs text-charcoal mt-1\">\n                {displayStatus === 'listening' && 'Your microphone is active'}\n                {displayStatus === 'speaking' && 'The agent is speaking'}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* Controls */}\n        <div className=\"border-t-3 border-charcoal bg-off-white p-4 flex gap-3\">\n          {/* End Call Button */}\n          <button\n            onClick={handleEndCall}\n            className=\"w-full bg-peach text-charcoal px-4 py-3 border-3 border-charcoal shadow-brutal-xs font-black uppercase text-sm hover:-translate-x-[1px] hover:-translate-y-[1px] hover:shadow-brutal-sm transition-all duration-200 flex items-center justify-center gap-2 rounded-sm\"\n          >\n            <Phone className=\"w-4 h-4\" />\n            <span>End Call</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["VoiceChat","isOpen","onClose","status","isSpeaking","startSession","endSession","useConversation","displayStatus","setDisplayStatus","useState","useEffect","handleEndCall","jsxs","jsx","X","Fragment","Mic","Phone"],"mappings":"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"}